[{"categories":null,"content":" Monoya's Blog 这是一个分享IT技术的小站。 ","date":"2022-08-11","objectID":"/friends/:0:0","tags":null,"title":"","uri":"/friends/"},{"categories":null,"content":"简介:维基百科中关于quic的定义 1. 安装依赖 以Ubuntu64位为例, sudo apt update \u0026\u0026 sudo apt install build-essential mercurial psmisc lsb-release cmake golang libunwind-dev git libpcre3-dev zlib1g-dev 2.编译boringssl 由于OpenSSL官方暂不支持nginx-quic,需要使用Google基于OpenSSL开发的BoringSSL分支来提供支持,源码地址 cd ~ git clone https://github.com/google/boringssl cd boringssl/ mkdir build \u0026\u0026 cd build cmake ../ make #期间可能会出现golang下载包超时的情况,需要设置goproxy #执行 go env -w GOPROXY=\"https://goproxy.cn,direct\" 3.编译nginx nginx-quic项目托管在源码地址 sudo apt install mercurial hg clone -b quic https://hg.nginx.org/nginx-quic ./auto/configure --with-debug --prefix=/usr/local/nginx-quic --with-http_v3_module --with-http_ssl_module --with-http_v2_module \\ --with-cc-opt=\"-I../boringssl/include\" \\ --with-ld-opt=\"-L../boringssl/build/ssl \\ -L../boringssl/build/crypto\" make make install nginx-quic的相关目录在/usr/local/nginx-quic下 4.配置nginx.conf并测试 使用文本编辑软件编辑 /usr/local/nginx-quic/conf/nginx.conf sudo vim /usr/local/nginx-quic/conf/nginx.conf #将之前的server{}改为下面的,如果有多个网站,reuseport只能出现一个网站中 server { #listen 80; listen 443 ssl http2; listen 443 http3 reuseport; server_name example.com; index index.html index.htm; root /web/static/example.com; charset koi8-r; #SSL-START ssl_certificate /web/cert/example.pem; ssl_certificate_key /web/cert/example.key; ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3; #SSL-END add_header Alt-Svc 'h3=\":443\"; ma=86400;quic=\":443\"; h3-29=\":443\";h3-27=\":443\";h3-25=\":443\"; h3-T050=\":443\"; h3-Q050=\":443\";h3-Q049=\":443\";h3-Q048=\":443\"; h3-Q046=\":443\"; h3-Q043=\":443\"'; # Advertise that QUIC is available;; #limit_conn perserver 400; #limit_conn perip 15; #limit_rate 1024k; #ERROR-PAGE-START #error_page 404 /404.html; #error_page 502 /502.html; #ERROR-PAGE-END access_log /web/log/example.log; error_log /web/log/example.error.log; } #退出vim,启动nginx sudo ./usr/local/nginx-quic/sbin/nginx 5.测试是否开启http3 使用http3check来进行测试,下面是我的网站测试截图 使用Google chrome测试 附上编译完成的nginx以及相关配置的下载链接😀 ","date":"2022-08-07","objectID":"/nginx%E4%BD%BF%E7%94%A8http3quic/:0:0","tags":null,"title":"Nginx使用HTTP3(QUIC)","uri":"/nginx%E4%BD%BF%E7%94%A8http3quic/"}]